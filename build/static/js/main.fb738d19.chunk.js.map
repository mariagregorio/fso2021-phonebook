{"version":3,"sources":["services/persons.js","components/Filter.js","components/AddNew.js","components/PersonsList.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","personsService","getAllPersons","axios","get","then","res","data","createPerson","newPerson","post","deletePerson","id","delete","updatePerson","person","put","Filter","filterValue","handleFilterChange","value","onChange","AddNew","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","PersonsList","personsToShow","handleDeletePerson","map","name","number","onClick","Notification","notification","className","message","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterValue","filteredPersons","setFilteredPersons","setNotification","useEffect","personsRes","setTimeout","filterPersonsBy","list","filter","toUpperCase","indexOf","e","target","preventDefault","personToUpdate","find","trim","window","confirm","updatedPerson","personRes","catch","concat","personTodelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fb738d19.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAllPersons = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst createPerson = (newPerson) => {\r\n  const request = axios.post(baseUrl, newPerson)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst updatePerson = (id, person) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, person)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst personsService = { getAllPersons, createPerson, deletePerson, updatePerson }\r\n\r\nexport default personsService","import React from 'react'\r\n\r\nconst Filter = ({ filterValue, handleFilterChange }) => {\r\n  return (\r\n    <div>filter shown with <input value={filterValue} onChange={handleFilterChange}/></div> \r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst AddNew = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>name: <input value={newName} onChange={handleNameChange} /></div>\r\n      <div>number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default AddNew","import React from 'react'\r\n\r\nconst PersonsList = ({ personsToShow, handleDeletePerson }) => {\r\n  return (\r\n    <div>\r\n      {personsToShow.map(person => <p key={person.name}>{person.name} {person.number} <button onClick={() => handleDeletePerson(person.id)}>delete</button></p>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonsList","import React from 'react'\r\n\r\nconst Notification = ({ notification }) => {\r\n\r\n  if (notification === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={notification.type}>\r\n      {notification.message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport Filter from './components/Filter'\nimport AddNew from './components/AddNew'\nimport PersonsList from './components/PersonsList'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterValue, setFilterValue ] = useState('')\n  const [ filteredPersons, setFilteredPersons ] = useState([])\n  const [ notification, setNotification ] = useState(null)\n\n  useEffect(() => {\n    personsService\n      .getAllPersons()\n      .then(personsRes => {\n        setPersons(personsRes)\n        setFilteredPersons(personsRes)\n      })\n  }, [])\n\n  useEffect(() => {\n    setTimeout(() => setNotification(null), 4000)\n  }, [notification])\n\n  const filterPersonsBy = (value, list) => {\n    return list.filter(person => {\n      const personName = person.name.toUpperCase()\n      return personName.indexOf(value.toUpperCase()) !== -1\n    })\n  }\n\n  const addPerson = (e) => {\n    e.preventDefault()\n    const personToUpdate = persons.find(person => person.name === newName.trim())\n    if (!personToUpdate) {\n      const newPerson = { \n        name: newName.trim(), \n        number: newNumber\n      }\n      personsService\n        .createPerson(newPerson)\n        .then(personRes => {\n          setPersons(persons.concat(personRes))\n          setNewName('')\n          setNewNumber('')\n          // in case the filter is applied, re-filter list with including the new person added\n          if (filterValue !== '') {\n            setFilteredPersons(filterPersonsBy(filterValue, [...persons, personRes]))\n          }\n          setNotification({type: 'success', message: `Added ${personRes.name}`})\n        })\n        .catch(() => {\n          setNotification({type: 'error', message: `Could not add ${newName}`})\n        })\n      \n    } else {\n      const confirmChangeNumber = window.confirm(`${newName} is already added to phonebook, replace old number with new one?`)\n      if(confirmChangeNumber) {\n        const updatedPerson = {...personToUpdate, number: newNumber}\n        personsService\n          .updatePerson(updatedPerson.id, updatedPerson)\n          .then(personRes => {\n            setPersons(persons.map(person => person.id === updatedPerson.id ? personRes : person))\n            setNewName('')\n            setNewNumber('')\n            setNotification({type: 'success', message: `Updated ${updatedPerson.name}'s number`})\n          })\n          .catch(() => {\n            setNotification({type: 'error', message: `Could not update ${updatedPerson.name}'s number`})\n          })\n      }\n    }\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilterChange = (e) => {\n    setFilterValue(e.target.value)\n    setFilteredPersons(filterPersonsBy(e.target.value, persons))\n  }\n\n  const handleDeletePerson = (id) => {\n    const personTodelete = persons.find(person => person.id === id)\n    const confirmDelete = window.confirm(`Are you sure you want to delete ${personTodelete.name}?`)\n    if(confirmDelete) {\n      personsService\n        .deletePerson(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n          setNotification({type: 'success', message: `Deleted ${personTodelete.name}`})\n        })\n        .catch(() => {\n          setNotification({type: 'error', message: `Could not delete ${personTodelete.name}`})\n        })\n    }\n  }\n\n  const personsToShow = filterValue === '' \n    ? persons\n    : filteredPersons\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter filterValue={filterValue} handleFilterChange={handleFilterChange} />\n      <h2>add a new</h2>\n      <AddNew addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <PersonsList personsToShow={personsToShow} handleDeletePerson={handleDeletePerson} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}